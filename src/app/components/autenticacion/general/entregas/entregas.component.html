<div style="background-image: url('https://static.vecteezy.com/system/resources/previews/006/663/095/large_2x/shopping-concept-cartons-or-paper-boxes-and-shopping-bag-in-red-shopping-cart-on-pink-background-online-shopping-consumers-can-shop-from-home-and-delivery-service-with-copy-space-free-photo.jpg'); background-repeat: no-repeat; background-size: cover;">
 
  <app-cabecera></app-cabecera>
  <br>
  <div class="container">

    <div class="d-flex justify-content-end mb-3">
      <button class="btn btn-success me-2" [routerLink]="['/agregar/entrega']">
        Agregar Entrega
    </button>
    </div>

<!-- Filtros -->
<div class="mb-3">
  <label for="usuarioFiltro" class="form-label">Filtrar por Usuario:</label>
  <input id="usuarioFiltro" class="form-control" [(ngModel)]="filtroUsuario" (ngModelChange)="onFilterChange()" placeholder="Nombre del Usuario">
</div>

<div class="mb-3">
  <label for="empresaTransporteFiltro" class="form-label">Filtrar por Empresa Transporte:</label>
  <input id="empresaTransporteFiltro" class="form-control" [(ngModel)]="filtroEmpresaTransporte" (ngModelChange)="onFilterChange()" placeholder="Nombre de la Empresa de Transporte">
</div>

<div class="mb-3">
  <label for="tipoTransporteFiltro" class="form-label">Filtrar por Tipo Transporte:</label>
  <input id="tipoTransporteFiltro" class="form-control" [(ngModel)]="filtroTipoTransporte" (ngModelChange)="onFilterChange()" placeholder="Nombre del Tipo de Transporte">
</div>


    <div class="table-responsive">


      <table class="table table-bordered">
        <thead class="thead-dark">
          <tr>
            <th scope="col">Id</th>
            <th scope="col">Usuario </th>
            <th scope="col">Orden Compra</th>
            <th scope="col">Descripcion</th>
            <th scope="col">Empresa Transporte</th>
            <th scope="col">Fecha Envio</th>
            <th scope="col">Tipo Transporte</th>
            <th scope="col">Fecha Entrega</th>
            <th scope="col">Direccion Entrega</th>
            
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let elem of paginatedEntregas">
            <td>{{elem.id}}</td>
            <td>{{elem.usuario?.nombre}}</td>
            <td>{{elem.ordenCompra}}</td>
            <td>{{elem.descripcion}}</td>
            <td>{{elem.tipoTransporte?.empresaTransporte?.nombreEmpresa}}</td>
            <td>{{elem.fechaEnvio}}</td>
            <td>{{elem.tipoTransporte?.tipoTransporte}}</td>
            <td>{{elem.fechaEntrega}}</td>
            <td>{{elem.direccionEntrega}}</td>
            <td>
              
                <span class="cursor text-primary">
                  <i [routerLink]="['/verEntrega', elem.id]" class="bi bi-search"></i>
                </span>
                
               
                                         
            </td>
           
          </tr>
        </tbody>
      </table>


      
    </div>
    <nav aria-label="Page navigation">
      <ul class="pagination justify-content-center">
        <li class="page-item" [class.disabled]="currentPage === 1">
          <a class="page-link" (click)="changePage(currentPage - 1)">Previous</a>
        </li>
        <li class="page-item" *ngFor="let page of totalPagesArray" [class.active]="page === currentPage">
          <a class="page-link" (click)="changePage(page)">{{page}}</a>
        </li>
        <li class="page-item" [class.disabled]="currentPage === totalPages">
          <a class="page-link" (click)="changePage(currentPage + 1)">Next</a>
        </li>
      </ul>
    </nav>
  </div>

  <br><br><br><br><br>
  <app-pie></app-pie>
</div>
